<!DOCTYPE html>
<html>

<head>
	
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
		integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<link rel="stylesheet" href="./style.css">
	<title>회원 가입</title>

	<style>
		.btn {
			width: 80px;
			height: 30px;
			text-align: center;
			padding: 0px;
		}


		div#wrap {
			width: 800px;
			margin: 30px auto;
			border: 3px solid skyblue;
		}
		table th,
		table td {
			padding: 20px;
		}





		.row {
			margin-top: 45px;
		}

		.btn {
			margin-bottom: 30px;
		}

		#main {
			margin-top: 50px;
			border: 3px solid skyblue;
		}
	</style>
</head>

<body>
	<header>

		<div class="container">
			<a href="profilebox.html"><img src="img/title.png"></a>
		</div>
	</header>
	<nav>
		<a href="profilebox.html" class="common1"><b>SSUWORLD</b></a>
	</nav>

	<div class="container" id="main">
		<div class="col-12 col-sm-12 text-center">
			<h2 class="bg-primary text-white">SIGNUP</h2>
		</div>
		<form action="/register" method="POST">
			<div class="row">
				<div class="col-3 col-sm-3">
				</div>
				<div class="col align-self-center">
					<label for="IdInput">ID</label>
					<input required type="email" class="form-control" id="IdInput" placeholder="ID@example.com"
					name="id"
						>
				</div>
				<div class="col-3 col-sm-3 mt-5">
					<button type="button" class="btn btn-secondary btn-sm" onclick="overlap()" style="height: 30px;"  >중복확인</button> 
				</div>
			</div>

			<div class="row">
				<div class="col-3 col-sm-3">
				</div>
				<div class="col align-self-center">
					<label for="PwInput">PW</label>
					<input required type="password" class="form-control" id="PwInput" placeholder="PassWord"
						name="pw">
				</div>
				<div class="col-3 col-sm-3">
				</div>
			</div>

			<div class="row">
				<div class="col-3 col-sm-3">
				</div>
				<div class="col align-self-center">
					<label for="NameInput">NAME</label>
					<input required type="text" class="form-control" id="NameInput" placeholder="Name" name="name">
				</div>
				<div class="col-3 col-sm-3">
				</div>
			</div>

			<div class="row">
				<div class="col-3 col-sm-3">
				</div>
				<div class="col align-self-center">
					<label for="BirthInput">BIRTH</label>
					<input required type="date" class="form-control" id="BirthInput" placeholder="Birth"
						name="birth">
				</div>
				<div class="col-3 col-sm-3">
				</div>
			</div>

			<div class="row logg text-center">
				<div class="col-12 col-sm-12">
					<!--<button type="button" class="btn btn-warning text-white" style="height: 37px;">회원가입</button> -->
					<input type="submit" class="btn btn-warning text-white" value="회원가입" disabled id="com2">
				</div>
			</div>
		</form>

	</div>

	<div id="footer">
		<div class="footer_area">
			<address>
				&nbsp;서울특별시 동작구 상도동 <br />
				&nbsp;학생정보 : 숭실대학교 <br />
				&nbsp;코드정보 : https://github.com/owjs3901/SSU_World <br />
			</address>
			<p class="copyright">
				COPYRIGHT (c) ALL rights reserved.
			</p>
		</div>
	</div>

	<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
		integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
		integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
		crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
		integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
		crossorigin="anonymous"></script>

		<script>
			function overlap(){
				//console.log('aaaaa')
				const idInput = document.getElementsByName('id')[0];

				fetch('/api/overlap', {
					method:'POST',
					headers:{
						'Content-Type':'application/json'
					},
					body:JSON.stringify({
						id:idInput.value
					})
				})
				.then(v=>{
					if(v.status == 200)
						return v.json()
				})
				.then(v=>{

					//const com1 = document.getElementById("com1")
					//const com2 = document.getElementById("com1")
					
					console.log('aaa', v)
					if(v.res == true)
						alert("중복된 아이디입니다.")
					else{
						alert("사용가능한 아이디입니다.")
						console.log(document.getElementById('IdInput'))
						document.getElementById('IdInput').readOnly = true
						document.getElementById('com2').disabled = false
					}
					
				})
			}
		

		</script>	


</body>

</html>